{
  "author": "mzeevi@nvidia.com",
  "agentConfig": [
    {
      "type": "pod",
      "libraryResource": "com/nvidia/blossom/agentTemplates/kaniko_arm64_pod.yaml",
      "label": "arm64-agent"
    }
  ],
  "ENABLE_CIA": "false",
  "phases": [
    {
      "Build": [
        {
          "name": "Build amd64",
          "module": "com.nvidia.ngci.modules.docker.kanikoBuild",
          "container": "kaniko",
          "parameters": {
            "DOCKERFILE_CONTEXT" : "."
          }
        },
        {
          "name": "sanity",
          "module": "com.mellanox.jenkins.generic_modules.RunCmd",
          "container": "kaniko-arm:arm64-agent",
          "parameters": {
            "cmd": "ls"
          }
        },
        {
          "name": "Build arm64",
          "module": "com.nvidia.ngci.modules.docker.kanikoBuild",
          "container": "kaniko-arm:arm64-agent",
          "parameters": {
            "PLATFORM": "arm64",
            "DOCKERFILE_CONTEXT": "."
          }
        }
      ]
    },
    {
      "Package": [
        {
          "name": "Manifest",
          "module": "com.nvidia.ngci.modules.docker.manifest",
          "container": "dind",
          "parameters": {
            "PLATFORMS_LIST": "amd64, arm64"
          }
        }
      ]
    }
  ]
}
